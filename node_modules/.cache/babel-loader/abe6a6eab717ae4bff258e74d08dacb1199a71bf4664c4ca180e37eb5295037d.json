{"ast":null,"code":"import _toConsumableArray from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _typeof from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _createForOfIteratorHelper from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.has.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.reflect.get.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.reflect.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.push.js\";\nvar Refs = Symbol('Forwarded refs');\n\n/** Omit properties starting with P */\n\nexport function forwardRefs(target) {\n  for (var _len = arguments.length, refs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    refs[_key - 1] = arguments[_key];\n  }\n  target[Refs] = refs;\n  return new Proxy(target, {\n    get: function get(target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key);\n      }\n      var _iterator = _createForOfIteratorHelper(refs),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var ref = _step.value;\n          if (ref.value && Reflect.has(ref.value, key)) {\n            var val = Reflect.get(ref.value, key);\n            return typeof val === 'function' ? val.bind(ref.value) : val;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    },\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, key) {\n      var descriptor = Reflect.getOwnPropertyDescriptor(target, key);\n      if (descriptor) return descriptor;\n\n      // Skip internal properties\n      if (_typeof(key) === 'symbol' || key.startsWith('__')) return;\n\n      // Check each ref's own properties\n      var _iterator2 = _createForOfIteratorHelper(refs),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var ref = _step2.value;\n          if (!ref.value) continue;\n          var _descriptor = Reflect.getOwnPropertyDescriptor(ref.value, key);\n          if (_descriptor) return _descriptor;\n          if ('_' in ref.value && 'setupState' in ref.value._) {\n            var _descriptor2 = Reflect.getOwnPropertyDescriptor(ref.value._.setupState, key);\n            if (_descriptor2) return _descriptor2;\n          }\n        }\n        // Recursive search up each ref's prototype\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(refs),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _ref = _step3.value;\n          var obj = _ref.value && Object.getPrototypeOf(_ref.value);\n          while (obj) {\n            var _descriptor3 = Reflect.getOwnPropertyDescriptor(obj, key);\n            if (_descriptor3) return _descriptor3;\n            obj = Object.getPrototypeOf(obj);\n          }\n        }\n        // Call forwarded refs' proxies\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      var _iterator4 = _createForOfIteratorHelper(refs),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _ref2 = _step4.value;\n          var childRefs = _ref2.value && _ref2.value[Refs];\n          if (!childRefs) continue;\n          var queue = childRefs.slice();\n          while (queue.length) {\n            var _ref3 = queue.shift();\n            var _descriptor4 = Reflect.getOwnPropertyDescriptor(_ref3.value, key);\n            if (_descriptor4) return _descriptor4;\n            var _childRefs = _ref3.value && _ref3.value[Refs];\n            if (_childRefs) queue.push.apply(queue, _toConsumableArray(_childRefs));\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      return undefined;\n    }\n  });\n}","map":{"version":3,"mappings":"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","names":["Refs","Symbol","forwardRefs","target","refs","Proxy","get","key","Reflect","has","ref","value","val","bind","getOwnPropertyDescriptor","descriptor","startsWith","_","setupState","obj","Object","getPrototypeOf","childRefs","queue","slice","length","shift","push","undefined"],"sources":["../../src/composables/forwardRefs.ts"],"sourcesContent":["import type { ComponentPublicInstance, Ref, UnwrapRef } from 'vue'\nimport type { UnionToIntersection } from '@/util'\n\nconst Refs = Symbol('Forwarded refs')\n\n/** Omit properties starting with P */\ntype OmitPrefix<T, P extends string> = [Extract<keyof T, `${P}${any}`>] extends [never] ? T : Omit<T, `${P}${any}`>\n\ntype OmitProps<T> = T extends { $props: any } ? Omit<T, keyof T['$props']> : never\n\nexport function forwardRefs<T extends {}, U extends Ref<HTMLElement | Omit<ComponentPublicInstance, '$emit'> | undefined>[]> (\n  target: T,\n  ...refs: U\n): T & UnionToIntersection<{ [K in keyof U]: OmitPrefix<OmitProps<NonNullable<UnwrapRef<U[K]>>>, '$'> }[number]> {\n  (target as any)[Refs] = refs\n\n  return new Proxy(target, {\n    get (target, key) {\n      if (Reflect.has(target, key)) {\n        return Reflect.get(target, key)\n      }\n      for (const ref of refs) {\n        if (ref.value && Reflect.has(ref.value, key)) {\n          const val = Reflect.get(ref.value, key)\n          return typeof val === 'function'\n            ? val.bind(ref.value)\n            : val\n        }\n      }\n    },\n    getOwnPropertyDescriptor (target, key) {\n      const descriptor = Reflect.getOwnPropertyDescriptor(target, key)\n      if (descriptor) return descriptor\n\n      // Skip internal properties\n      if (typeof key === 'symbol' || key.startsWith('__')) return\n\n      // Check each ref's own properties\n      for (const ref of refs) {\n        if (!ref.value) continue\n        const descriptor = Reflect.getOwnPropertyDescriptor(ref.value, key)\n        if (descriptor) return descriptor\n        if ('_' in ref.value && 'setupState' in ref.value._) {\n          const descriptor = Reflect.getOwnPropertyDescriptor(ref.value._.setupState, key)\n          if (descriptor) return descriptor\n        }\n      }\n      // Recursive search up each ref's prototype\n      for (const ref of refs) {\n        let obj = ref.value && Object.getPrototypeOf(ref.value)\n        while (obj) {\n          const descriptor = Reflect.getOwnPropertyDescriptor(obj, key)\n          if (descriptor) return descriptor\n          obj = Object.getPrototypeOf(obj)\n        }\n      }\n      // Call forwarded refs' proxies\n      for (const ref of refs) {\n        const childRefs = ref.value && (ref.value as any)[Refs]\n        if (!childRefs) continue\n        const queue = childRefs.slice()\n        while (queue.length) {\n          const ref = queue.shift()\n          const descriptor = Reflect.getOwnPropertyDescriptor(ref.value, key)\n          if (descriptor) return descriptor\n          const childRefs = ref.value && (ref.value as any)[Refs]\n          if (childRefs) queue.push(...childRefs)\n        }\n      }\n      return undefined\n    },\n  }) as any\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
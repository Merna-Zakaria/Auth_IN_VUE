{"ast":null,"code":"import _typeof from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _objectWithoutProperties from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"once\", \"immediate\"];\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.sub.js\";\n// Types\n\nfunction mounted(el, binding) {\n  var _ref2, _ref3, _ref4, _ref5;\n  var modifiers = binding.modifiers || {};\n  var value = binding.value;\n  var once = modifiers.once,\n    immediate = modifiers.immediate,\n    modifierKeys = _objectWithoutProperties(modifiers, _excluded);\n  var defaultValue = !Object.keys(modifierKeys).length;\n  var _ref = _typeof(value) === 'object' ? value : {\n      handler: value,\n      options: {\n        attributes: (_ref2 = modifierKeys == null ? void 0 : modifierKeys.attr) !== null && _ref2 !== void 0 ? _ref2 : defaultValue,\n        characterData: (_ref3 = modifierKeys == null ? void 0 : modifierKeys[\"char\"]) !== null && _ref3 !== void 0 ? _ref3 : defaultValue,\n        childList: (_ref4 = modifierKeys == null ? void 0 : modifierKeys.child) !== null && _ref4 !== void 0 ? _ref4 : defaultValue,\n        subtree: (_ref5 = modifierKeys == null ? void 0 : modifierKeys.sub) !== null && _ref5 !== void 0 ? _ref5 : defaultValue\n      }\n    },\n    handler = _ref.handler,\n    options = _ref.options;\n  var observer = new MutationObserver(function () {\n    var mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var observer = arguments.length > 1 ? arguments[1] : undefined;\n    handler == null ? void 0 : handler(mutations, observer);\n    if (once) unmounted(el, binding);\n  });\n  if (immediate) handler == null ? void 0 : handler([], observer);\n  el._mutate = Object(el._mutate);\n  el._mutate[binding.instance.$.uid] = {\n    observer: observer\n  };\n  observer.observe(el, options);\n}\nfunction unmounted(el, binding) {\n  var _el$_mutate;\n  if (!((_el$_mutate = el._mutate) != null && _el$_mutate[binding.instance.$.uid])) return;\n  el._mutate[binding.instance.$.uid].observer.disconnect();\n  delete el._mutate[binding.instance.$.uid];\n}\nexport var Mutate = {\n  mounted: mounted,\n  unmounted: unmounted\n};\nexport default Mutate;","map":{"version":3,"mappings":";;;;;AAAA;;AASA,SAASA,OAAO,CAAEC,EAAe,EAAEC,OAAiC,EAAE;EAAA;EACpE,IAAMC,SAAS,GAAGD,OAAO,CAACC,SAAS,IAAI,CAAC,CAAC;EACzC,IAAMC,KAAK,GAAGF,OAAO,CAACE,KAAK;EAC3B,IAAQC,IAAI,GAAiCF,SAAS,CAA9CE,IAAI;IAAEC,SAAS,GAAsBH,SAAS,CAAxCG,SAAS;IAAKC,wCAAiBJ,SAAS;EACtD,IAAMK,YAAY,GAAG,CAACC,MAAM,CAACC,IAAI,CAACH,YAAY,CAAC,CAACI,MAAM;EAEtD,WAA6B,QAAOP,KAAK,MAAK,QAAQ,GAClDA,KAAK,GACL;MACAQ,OAAO,EAAER,KAAK;MACdS,OAAO,EAAE;QACPC,UAAU,WAAEP,YAAY,oBAAZA,YAAY,CAAEQ,IAAI,yCAAIP,YAAY;QAC9CQ,aAAa,WAAET,YAAY,oBAAZA,YAAY,QAAM,yCAAIC,YAAY;QACjDS,SAAS,WAAEV,YAAY,oBAAZA,YAAY,CAAEW,KAAK,yCAAIV,YAAY;QAC9CW,OAAO,WAAEZ,YAAY,oBAAZA,YAAY,CAAEa,GAAG,yCAAIZ;MAChC;IACF,CAAC;IAVKI,OAAO,QAAPA,OAAO;IAAEC;EAYjB,IAAMQ,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,YAGjC;IAAA,IAFHC,SAA2B,uEAAG,EAAE;IAAA,IAChCF,QAA0B;IAE1BT,OAAO,oBAAPA,OAAO,CAAGW,SAAS,EAAEF,QAAQ,CAAC;IAE9B,IAAIhB,IAAI,EAAEmB,SAAS,CAACvB,EAAE,EAAEC,OAAO,CAAC;EAClC,CAAC,CAAC;EAEF,IAAII,SAAS,EAAEM,OAAO,oBAAPA,OAAO,CAAG,EAAE,EAAES,QAAQ,CAAC;EAEtCpB,EAAE,CAACwB,OAAO,GAAGhB,MAAM,CAACR,EAAE,CAACwB,OAAO,CAAC;EAC/BxB,EAAE,CAACwB,OAAO,CAAEvB,OAAO,CAACwB,QAAQ,CAAEC,CAAC,CAACC,GAAG,CAAC,GAAG;IAAEP;EAAS,CAAC;EAEnDA,QAAQ,CAACQ,OAAO,CAAC5B,EAAE,EAAEY,OAAO,CAAC;AAC/B;AAEA,SAASW,SAAS,CAAEvB,EAAe,EAAEC,OAAiC,EAAE;EAAA;EACtE,IAAI,iBAACD,EAAE,CAACwB,OAAO,aAAVK,YAAa5B,OAAO,CAACwB,QAAQ,CAAEC,CAAC,CAACC,GAAG,CAAC,GAAE;EAE5C3B,EAAE,CAACwB,OAAO,CAACvB,OAAO,CAACwB,QAAQ,CAAEC,CAAC,CAACC,GAAG,CAAC,CAAEP,QAAQ,CAACU,UAAU,EAAE;EAC1D,OAAO9B,EAAE,CAACwB,OAAO,CAACvB,OAAO,CAACwB,QAAQ,CAAEC,CAAC,CAACC,GAAG,CAAC;AAC5C;AAEA,OAAO,IAAMI,MAAM,GAAG;EACpBhC,OAAO,EAAPA,OAAO;EACPwB;AACF,CAAC;AAED,eAAeQ,MAAM","names":["mounted","el","binding","modifiers","value","once","immediate","modifierKeys","defaultValue","Object","keys","length","handler","options","attributes","attr","characterData","childList","child","subtree","sub","observer","MutationObserver","mutations","unmounted","_mutate","instance","$","uid","observe","_el$_mutate","disconnect","Mutate"],"sources":["../../../src/directives/mutate/index.ts"],"sourcesContent":["// Types\nimport type { DirectiveBinding } from 'vue'\nimport type { MutationOptions } from '@/composables/mutationObserver'\n\nexport interface MutationDirectiveBinding extends Omit<DirectiveBinding, 'modifiers' | 'value'> {\n  value: MutationCallback | { handler: MutationCallback, options?: MutationObserverInit }\n  modifiers: MutationOptions\n}\n\nfunction mounted (el: HTMLElement, binding: MutationDirectiveBinding) {\n  const modifiers = binding.modifiers || {}\n  const value = binding.value\n  const { once, immediate, ...modifierKeys } = modifiers\n  const defaultValue = !Object.keys(modifierKeys).length\n\n  const { handler, options } = typeof value === 'object'\n    ? value\n    : {\n      handler: value,\n      options: {\n        attributes: modifierKeys?.attr ?? defaultValue,\n        characterData: modifierKeys?.char ?? defaultValue,\n        childList: modifierKeys?.child ?? defaultValue,\n        subtree: modifierKeys?.sub ?? defaultValue,\n      },\n    }\n\n  const observer = new MutationObserver((\n    mutations: MutationRecord[] = [],\n    observer: MutationObserver\n  ) => {\n    handler?.(mutations, observer)\n\n    if (once) unmounted(el, binding)\n  })\n\n  if (immediate) handler?.([], observer)\n\n  el._mutate = Object(el._mutate)\n  el._mutate![binding.instance!.$.uid] = { observer }\n\n  observer.observe(el, options)\n}\n\nfunction unmounted (el: HTMLElement, binding: MutationDirectiveBinding) {\n  if (!el._mutate?.[binding.instance!.$.uid]) return\n\n  el._mutate[binding.instance!.$.uid]!.observer.disconnect()\n  delete el._mutate[binding.instance!.$.uid]\n}\n\nexport const Mutate = {\n  mounted,\n  unmounted,\n}\n\nexport default Mutate\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
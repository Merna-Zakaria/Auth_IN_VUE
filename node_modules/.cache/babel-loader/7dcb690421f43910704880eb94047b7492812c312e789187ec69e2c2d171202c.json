{"ast":null,"code":"import _objectSpread from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { withDirectives as _withDirectives, resolveDirective as _resolveDirective, createVNode as _createVNode } from \"vue\";\n// Composables\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\";\nimport { makeTransitionProps, MaybeTransition } from \"../../composables/transition.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Directives\nimport intersect from \"../../directives/intersect/index.mjs\"; // Utilities\nimport { defineComponent, useRender } from \"../../util/index.mjs\"; // Types\nexport var VLazy = defineComponent({\n  name: 'VLazy',\n  directives: {\n    intersect: intersect\n  },\n  props: _objectSpread(_objectSpread(_objectSpread({\n    modelValue: Boolean,\n    options: {\n      type: Object,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      \"default\": function _default() {\n        return {\n          root: undefined,\n          rootMargin: undefined,\n          threshold: undefined\n        };\n      }\n    }\n  }, makeDimensionProps()), makeTagProps()), makeTransitionProps({\n    transition: 'fade-transition'\n  })),\n  emits: {\n    'update:modelValue': function updateModelValue(value) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var _useDimension = useDimension(props),\n      dimensionStyles = _useDimension.dimensionStyles;\n    var isActive = useProxiedModel(props, 'modelValue');\n    function onIntersect(isIntersecting) {\n      if (isActive.value) return;\n      isActive.value = isIntersecting;\n    }\n    useRender(function () {\n      var _slots$default;\n      return _withDirectives(_createVNode(props.tag, {\n        \"class\": \"v-lazy\",\n        \"style\": dimensionStyles.value\n      }, {\n        \"default\": function _default() {\n          return [isActive.value && _createVNode(MaybeTransition, {\n            \"transition\": props.transition,\n            \"appear\": true\n          }, {\n            \"default\": function _default() {\n              return [(_slots$default = slots[\"default\"]) == null ? void 0 : _slots$default.call(slots)];\n            }\n          })];\n        }\n      }), [[_resolveDirective(\"intersect\"), onIntersect, props.options]]);\n    });\n    return {};\n  }\n});","map":{"version":3,"mappings":";;AAAA;AAAA,SACSA,kBAAkB,EAAEC,YAAY;AAAA,SAChCC,YAAY;AAAA,SACZC,mBAAmB,EAAEC,eAAe;AAAA,SACpCC,eAAe,8CAExB;AAAA,OACOC,SAAS,8CAEhB;AAAA,SACSC,eAAe,EAAEC,SAAS,gCAEnC;AAGA,OAAO,IAAMC,KAAK,GAAGF,eAAe,CAAC;EACnCG,IAAI,EAAE,OAAO;EAEbC,UAAU,EAAE;IAAEL;EAAU,CAAC;EAEzBM,KAAK;IACHC,UAAU,EAAEC,OAAO;IACnBC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAA4C;MAClD;MACA;MACAC,WAAS;QAAA,OAAO;UACdC,IAAI,EAAEC,SAAS;UACfC,UAAU,EAAED,SAAS;UACrBE,SAAS,EAAEF;QACb,CAAC;MAAA;IACH;EAAC,GAEEpB,kBAAkB,EAAE,GACpBE,YAAY,EAAE,GACdC,mBAAmB,CAAC;IAAEoB,UAAU,EAAE;EAAkB,CAAC,EACzD;EAEDC,KAAK,EAAE;IACL,mBAAmB,EAAGC,+BAAc;MAAA,OAAK;IAAA;EAC3C,CAAC;EAEDC,KAAK,iBAAEd,KAAK,QAAa;IAAA,IAATe,QAAOC,KAAPD;IACd,oBAA4B1B,YAAY,CAACW,KAAK,CAAC;MAAvCiB;IAER,IAAMC,QAAQ,GAAGzB,eAAe,CAACO,KAAK,EAAE,YAAY,CAAC;IAErD,SAASmB,WAAW,CAAEC,cAAuB,EAAE;MAC7C,IAAIF,QAAQ,CAACL,KAAK,EAAE;MAEpBK,QAAQ,CAACL,KAAK,GAAGO,cAAc;IACjC;IAEAxB,SAAS,CAAC;MAAA;MAAA;QAAA,SAEA,QAAQ;QAAA,SAMNqB,eAAe,CAACJ;MAAK;QAAA;UAAA,QAE3BK,QAAQ,CAACL,KAAK;YAAA,cACgBb,KAAK,CAACW,UAAU;YAAA;UAAA;YAAA;cAAA,0BAC1CI,KAAK,WAAQ,qBAAbM,yBAAK,CAAY;YAAA;UAAA,EAEtB;QAAA;MAAA,sCAVCF,WAAW,EACXnB,KAAK,CAACG,OAAO;IAAA,CAWlB,CAAC;IAEF,OAAO,CAAC,CAAC;EACX;AACF,CAAC,CAAC","names":["makeDimensionProps","useDimension","makeTagProps","makeTransitionProps","MaybeTransition","useProxiedModel","intersect","defineComponent","useRender","VLazy","name","directives","props","modelValue","Boolean","options","type","Object","default","root","undefined","rootMargin","threshold","transition","emits","value","setup","slots","_ref","dimensionStyles","isActive","onIntersect","isIntersecting","_slots$default"],"sources":["../../../src/components/VLazy/VLazy.tsx"],"sourcesContent":["// Composables\nimport { makeDimensionProps, useDimension } from '@/composables/dimensions'\nimport { makeTagProps } from '@/composables/tag'\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Directives\nimport intersect from '@/directives/intersect'\n\n// Utilities\nimport { defineComponent, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\n\nexport const VLazy = defineComponent({\n  name: 'VLazy',\n\n  directives: { intersect },\n\n  props: {\n    modelValue: Boolean,\n    options: {\n      type: Object as PropType<IntersectionObserverInit>,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined,\n      }),\n    },\n\n    ...makeDimensionProps(),\n    ...makeTagProps(),\n    ...makeTransitionProps({ transition: 'fade-transition' }),\n  },\n\n  emits: {\n    'update:modelValue': (value: boolean) => true,\n  },\n\n  setup (props, { slots }) {\n    const { dimensionStyles } = useDimension(props)\n\n    const isActive = useProxiedModel(props, 'modelValue')\n\n    function onIntersect (isIntersecting: boolean) {\n      if (isActive.value) return\n\n      isActive.value = isIntersecting\n    }\n\n    useRender(() => (\n      <props.tag\n        class=\"v-lazy\"\n        v-intersect={[\n          onIntersect,\n          props.options,\n          isActive.value ? [] : ['once'],\n        ]}\n        style={ dimensionStyles.value }\n      >\n        { isActive.value && (\n          <MaybeTransition transition={ props.transition } appear>\n            { slots.default?.() }\n          </MaybeTransition>\n        )}\n      </props.tag>\n    ))\n\n    return {}\n  },\n})\n\nexport type VLazy = InstanceType<typeof VLazy>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VColorPickerCanvas.css\";\n\n// Utilities\nimport { clamp, convertToUnit, defineComponent, getEventCoordinates, useRender } from \"../../util/index.mjs\";\nimport { computed, onMounted, ref, watch } from 'vue';\n\n// Types\n\nexport var VColorPickerCanvas = defineComponent({\n  name: 'VColorPickerCanvas',\n  props: {\n    color: {\n      type: Object\n    },\n    disabled: Boolean,\n    dotSize: {\n      type: [Number, String],\n      \"default\": 10\n    },\n    height: {\n      type: [Number, String],\n      \"default\": 150\n    },\n    width: {\n      type: [Number, String],\n      \"default\": 300\n    }\n  },\n  emits: {\n    'update:color': function updateColor(color) {\n      return true;\n    },\n    'update:position': function updatePosition(hue) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var isInteracting = ref(false);\n    var isOutsideUpdate = ref(false);\n    var dotPosition = ref({\n      x: 0,\n      y: 0\n    });\n    var dotStyles = computed(function () {\n      var _dotPosition$value = dotPosition.value,\n        x = _dotPosition$value.x,\n        y = _dotPosition$value.y;\n      var radius = parseInt(props.dotSize, 10) / 2;\n      return {\n        width: convertToUnit(props.dotSize),\n        height: convertToUnit(props.dotSize),\n        transform: \"translate(\".concat(convertToUnit(x - radius), \", \").concat(convertToUnit(y - radius), \")\")\n      };\n    });\n    var canvasRef = ref();\n    function updateDotPosition(x, y, rect) {\n      var left = rect.left,\n        top = rect.top,\n        width = rect.width,\n        height = rect.height;\n      dotPosition.value = {\n        x: clamp(x - left, 0, width),\n        y: clamp(y - top, 0, height)\n      };\n    }\n    function handleClick(e) {\n      if (props.disabled || !canvasRef.value) return;\n      updateDotPosition(e.clientX, e.clientY, canvasRef.value.getBoundingClientRect());\n    }\n    function handleMouseDown(e) {\n      // To prevent selection while moving cursor\n      e.preventDefault();\n      if (props.disabled) return;\n      isInteracting.value = true;\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n    }\n    function handleMouseMove(e) {\n      if (props.disabled || !canvasRef.value) return;\n      isInteracting.value = true;\n      var coords = getEventCoordinates(e);\n      updateDotPosition(coords.clientX, coords.clientY, canvasRef.value.getBoundingClientRect());\n    }\n    function handleMouseUp() {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n    }\n    watch(dotPosition, function () {\n      var _ref2, _ref3;\n      var _props$color, _props$color2;\n      if (isOutsideUpdate.value) {\n        isOutsideUpdate.value = false;\n        return;\n      }\n      if (!canvasRef.value) return;\n      var _canvasRef$value$getB = canvasRef.value.getBoundingClientRect(),\n        width = _canvasRef$value$getB.width,\n        height = _canvasRef$value$getB.height;\n      var _dotPosition$value2 = dotPosition.value,\n        x = _dotPosition$value2.x,\n        y = _dotPosition$value2.y;\n      emit('update:color', {\n        h: (_ref2 = (_props$color = props.color) == null ? void 0 : _props$color.h) !== null && _ref2 !== void 0 ? _ref2 : 0,\n        s: clamp(x, 0, width) / width,\n        v: 1 - clamp(y, 0, height) / height,\n        a: (_ref3 = (_props$color2 = props.color) == null ? void 0 : _props$color2.a) !== null && _ref3 !== void 0 ? _ref3 : 1\n      });\n    });\n    function updateCanvas() {\n      var _ref4;\n      var _props$color3;\n      if (!canvasRef.value) return;\n      var canvas = canvasRef.value;\n      var ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      var saturationGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);\n      saturationGradient.addColorStop(0, 'hsla(0, 0%, 100%, 1)'); // white\n      saturationGradient.addColorStop(1, \"hsla(\".concat((_ref4 = (_props$color3 = props.color) == null ? void 0 : _props$color3.h) !== null && _ref4 !== void 0 ? _ref4 : 0, \", 100%, 50%, 1)\"));\n      ctx.fillStyle = saturationGradient;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      var valueGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);\n      valueGradient.addColorStop(0, 'hsla(0, 0%, 100%, 0)'); // transparent\n      valueGradient.addColorStop(1, 'hsla(0, 0%, 0%, 1)'); // black\n      ctx.fillStyle = valueGradient;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    watch(function () {\n      var _props$color4;\n      return (_props$color4 = props.color) == null ? void 0 : _props$color4.h;\n    }, updateCanvas, {\n      immediate: true\n    });\n    watch(function () {\n      return props.color;\n    }, function () {\n      if (isInteracting.value) {\n        isInteracting.value = false;\n        return;\n      }\n      if (!props.color) return;\n      isOutsideUpdate.value = true;\n      dotPosition.value = {\n        x: props.color.s * parseInt(props.width, 10),\n        y: (1 - props.color.v) * parseInt(props.height, 10)\n      };\n    }, {\n      deep: true,\n      immediate: true\n    });\n    onMounted(function () {\n      return updateCanvas();\n    });\n    useRender(function () {\n      return _createVNode(\"div\", {\n        \"class\": \"v-color-picker-canvas\",\n        \"style\": {\n          width: convertToUnit(props.width),\n          height: convertToUnit(props.height)\n        },\n        \"onClick\": handleClick,\n        \"onMousedown\": handleMouseDown,\n        \"onTouchstart\": handleMouseDown\n      }, [_createVNode(\"canvas\", {\n        \"ref\": canvasRef,\n        \"width\": props.width,\n        \"height\": props.height\n      }, null), _createVNode(\"div\", {\n        \"class\": ['v-color-picker-canvas__dot', {\n          'v-color-picker-canvas__dot--disabled': props.disabled\n        }],\n        \"style\": dotStyles.value\n      }, null)]);\n    });\n    return {};\n  }\n});","map":{"version":3,"mappings":";;;;AAAA;AACA;;AAEA;AAAA,SACSA,KAAK,EAAEC,aAAa,EAAEC,eAAe,EAAEC,mBAAmB,EAAEC,SAAS;AAC9E,SAASC,QAAQ,EAAEC,SAAS,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;;AAErD;;AAIA,OAAO,IAAMC,kBAAkB,GAAGP,eAAe,CAAC;EAChDQ,IAAI,EAAE,oBAAoB;EAE1BC,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC;IACR,CAAC;IACDC,QAAQ,EAAEC,OAAO;IACjBC,OAAO,EAAE;MACPJ,IAAI,EAAE,CAACK,MAAM,EAAEC,MAAM,CAAC;MACtBC,WAAS;IACX,CAAC;IACDC,MAAM,EAAE;MACNR,IAAI,EAAE,CAACK,MAAM,EAAEC,MAAM,CAAC;MACtBC,WAAS;IACX,CAAC;IACDE,KAAK,EAAE;MACLT,IAAI,EAAE,CAACK,MAAM,EAAEC,MAAM,CAAC;MACtBC,WAAS;IACX;EACF,CAAC;EAEDG,KAAK,EAAE;IACL,cAAc,EAAGX,0BAAU;MAAA,OAAK,IAAI;IAAA;IACpC,iBAAiB,EAAGY,2BAAQ;MAAA,OAAK;IAAA;EACnC,CAAC;EAEDC,KAAK,iBAAEd,KAAK,QAAY;IAAA,IAARe,OAAMC,KAAND;IACd,IAAME,aAAa,GAAGrB,GAAG,CAAC,KAAK,CAAC;IAChC,IAAMsB,eAAe,GAAGtB,GAAG,CAAC,KAAK,CAAC;IAClC,IAAMuB,WAAW,GAAGvB,GAAG,CAAC;MAAEwB,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC,CAAC;IAEvC,IAAMC,SAAS,GAAG5B,QAAQ,CAAC,YAAM;MAC/B,yBAAiByB,WAAW,CAACI,KAAK;QAA1BH,CAAC,sBAADA,CAAC;QAAEC;MACX,IAAMG,MAAM,GAAGC,QAAQ,CAACzB,KAAK,CAACM,OAAO,EAAE,EAAE,CAAC,GAAG,CAAC;MAE9C,OAAO;QACLK,KAAK,EAAErB,aAAa,CAACU,KAAK,CAACM,OAAO,CAAC;QACnCI,MAAM,EAAEpB,aAAa,CAACU,KAAK,CAACM,OAAO,CAAC;QACpCoB,SAAS,sBAAepC,aAAa,CAAC8B,CAAC,GAAGI,MAAM,CAAE,eAAIlC,aAAa,CAAC+B,CAAC,GAAGG,MAAM,CAAE;MAClF,CAAC;IACH,CAAC,CAAC;IAEF,IAAMG,SAAS,GAAG/B,GAAG,EAA4B;IAEjD,SAASgC,iBAAiB,CAAER,CAAS,EAAEC,CAAS,EAAEQ,IAAa,EAAE;MAC/D,IAAQC,IAAI,GAAyBD,IAAI,CAAjCC,IAAI;QAAEC,GAAG,GAAoBF,IAAI,CAA3BE,GAAG;QAAEpB,KAAK,GAAakB,IAAI,CAAtBlB,KAAK;QAAED,SAAWmB,IAAI,CAAfnB;MAC1BS,WAAW,CAACI,KAAK,GAAG;QAClBH,CAAC,EAAE/B,KAAK,CAAC+B,CAAC,GAAGU,IAAI,EAAE,CAAC,EAAEnB,KAAK,CAAC;QAC5BU,CAAC,EAAEhC,KAAK,CAACgC,CAAC,GAAGU,GAAG,EAAE,CAAC,EAAErB,MAAM;MAC7B,CAAC;IACH;IAEA,SAASsB,WAAW,CAAEC,CAAa,EAAE;MACnC,IAAIjC,KAAK,CAACI,QAAQ,IAAI,CAACuB,SAAS,CAACJ,KAAK,EAAE;MAExCK,iBAAiB,CAACK,CAAC,CAACC,OAAO,EAAED,CAAC,CAACE,OAAO,EAAER,SAAS,CAACJ,KAAK,CAACa,qBAAqB,EAAE,CAAC;IAClF;IAEA,SAASC,eAAe,CAAEJ,CAA0B,EAAE;MACpD;MACAA,CAAC,CAACK,cAAc,EAAE;MAElB,IAAItC,KAAK,CAACI,QAAQ,EAAE;MAEpBa,aAAa,CAACM,KAAK,GAAG,IAAI;MAE1BgB,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEC,eAAe,CAAC;MACrDF,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEE,aAAa,CAAC;MACjDH,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEC,eAAe,CAAC;MACrDF,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAEE,aAAa,CAAC;IACpD;IAEA,SAASD,eAAe,CAAER,CAA0B,EAAE;MACpD,IAAIjC,KAAK,CAACI,QAAQ,IAAI,CAACuB,SAAS,CAACJ,KAAK,EAAE;MAExCN,aAAa,CAACM,KAAK,GAAG,IAAI;MAE1B,IAAMoB,MAAM,GAAGnD,mBAAmB,CAACyC,CAAC,CAAC;MAErCL,iBAAiB,CAACe,MAAM,CAACT,OAAO,EAAES,MAAM,CAACR,OAAO,EAAER,SAAS,CAACJ,KAAK,CAACa,qBAAqB,EAAE,CAAC;IAC5F;IAEA,SAASM,aAAa,GAAI;MACxBH,MAAM,CAACK,mBAAmB,CAAC,WAAW,EAAEH,eAAe,CAAC;MACxDF,MAAM,CAACK,mBAAmB,CAAC,SAAS,EAAEF,aAAa,CAAC;MACpDH,MAAM,CAACK,mBAAmB,CAAC,WAAW,EAAEH,eAAe,CAAC;MACxDF,MAAM,CAACK,mBAAmB,CAAC,UAAU,EAAEF,aAAa,CAAC;IACvD;IAEA7C,KAAK,CAACsB,WAAW,EAAE,YAAM;MAAA;MAAA;MACvB,IAAID,eAAe,CAACK,KAAK,EAAE;QACzBL,eAAe,CAACK,KAAK,GAAG,KAAK;QAC7B;MACF;MAEA,IAAI,CAACI,SAAS,CAACJ,KAAK,EAAE;MAEtB,4BAA0BI,SAAS,CAACJ,KAAK,CAACa,qBAAqB,EAAE;QAAzDzB,KAAK,yBAALA,KAAK;QAAED;MACf,0BAAiBS,WAAW,CAACI,KAAK;QAA1BH,CAAC,uBAADA,CAAC;QAAEC;MAEXN,IAAI,CAAC,cAAc,EAAE;QACnB8B,CAAC,WAAE,qBAAK,CAAC5C,KAAK,qBAAX6C,aAAaD,CAAC,yCAAI,CAAC;QACtBE,CAAC,EAAE1D,KAAK,CAAC+B,CAAC,EAAE,CAAC,EAAET,KAAK,CAAC,GAAGA,KAAK;QAC7BqC,CAAC,EAAE,CAAC,GAAG3D,KAAK,CAACgC,CAAC,EAAE,CAAC,EAAEX,MAAM,CAAC,GAAGA,MAAM;QACnCuC,CAAC,WAAE,sBAAK,CAAChD,KAAK,qBAAXiD,cAAaD,CAAC,yCAAI;MACvB,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,SAASE,YAAY,GAAI;MAAA;MAAA;MACvB,IAAI,CAACxB,SAAS,CAACJ,KAAK,EAAE;MAEtB,IAAM6B,MAAM,GAAGzB,SAAS,CAACJ,KAAK;MAC9B,IAAM8B,GAAG,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MAEnC,IAAI,CAACD,GAAG,EAAE;MAEV,IAAME,kBAAkB,GAAGF,GAAG,CAACG,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAEJ,MAAM,CAACzC,KAAK,EAAE,CAAC,CAAC;MAC1E4C,kBAAkB,CAACE,YAAY,CAAC,CAAC,EAAE,sBAAsB,CAAC,EAAC;MAC3DF,kBAAkB,CAACE,YAAY,CAAC,CAAC,0BAAU,sBAAK,CAACxD,KAAK,qBAAXyD,cAAab,CAAC,yCAAI,CAAE,qBAAiB;MAChFQ,GAAG,CAACM,SAAS,GAAGJ,kBAAkB;MAClCF,GAAG,CAACO,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAER,MAAM,CAACzC,KAAK,EAAEyC,MAAM,CAAC1C,MAAM,CAAC;MAE/C,IAAMmD,aAAa,GAAGR,GAAG,CAACG,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEJ,MAAM,CAAC1C,MAAM,CAAC;MACtEmD,aAAa,CAACJ,YAAY,CAAC,CAAC,EAAE,sBAAsB,CAAC,EAAC;MACtDI,aAAa,CAACJ,YAAY,CAAC,CAAC,EAAE,oBAAoB,CAAC,EAAC;MACpDJ,GAAG,CAACM,SAAS,GAAGE,aAAa;MAC7BR,GAAG,CAACO,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAER,MAAM,CAACzC,KAAK,EAAEyC,MAAM,CAAC1C,MAAM,CAAC;IACjD;IAEAb,KAAK,CAAC;MAAA;MAAA,wBAAMG,KAAK,CAACC,KAAK,qBAAX6D,cAAajB,CAAC;IAAA,GAAEM,YAAY,EAAE;MAAEY,SAAS,EAAE;IAAK,CAAC,CAAC;IAE9DlE,KAAK,CAAC;MAAA,OAAMG,KAAK,CAACC,KAAK;IAAA,GAAE,YAAM;MAC7B,IAAIgB,aAAa,CAACM,KAAK,EAAE;QACvBN,aAAa,CAACM,KAAK,GAAG,KAAK;QAC3B;MACF;MAEA,IAAI,CAACvB,KAAK,CAACC,KAAK,EAAE;MAElBiB,eAAe,CAACK,KAAK,GAAG,IAAI;MAE5BJ,WAAW,CAACI,KAAK,GAAG;QAClBH,CAAC,EAAEpB,KAAK,CAACC,KAAK,CAAC8C,CAAC,GAAGtB,QAAQ,CAACzB,KAAK,CAACW,KAAK,EAAE,EAAE,CAAC;QAC5CU,CAAC,EAAE,CAAC,CAAC,GAAGrB,KAAK,CAACC,KAAK,CAAC+C,CAAC,IAAIvB,QAAQ,CAACzB,KAAK,CAACU,MAAM,EAAE,EAAE;MACpD,CAAC;IACH,CAAC,EAAE;MAAEsD,IAAI,EAAE,IAAI;MAAED,SAAS,EAAE;IAAK,CAAC,CAAC;IAEnCpE,SAAS,CAAC;MAAA,OAAMwD,YAAY,EAAE;IAAA,EAAC;IAE/B1D,SAAS,CAAC;MAAA;QAAA,SAEA,uBAAuB;QAAA,SACtB;UACLkB,KAAK,EAAErB,aAAa,CAACU,KAAK,CAACW,KAAK,CAAC;UACjCD,MAAM,EAAEpB,aAAa,CAACU,KAAK,CAACU,MAAM;QACpC,CAAC;QAAA,WACSsB,WAAW;QAAA,eACPK,eAAe;QAAA,gBACdA;MAAe;QAAA,OAGtBV,SAAS;QAAA,SACP3B,KAAK,CAACW,KAAK;QAAA,UACVX,KAAK,CAACU;MAAM;QAAA,SAGd,CACL,4BAA4B,EAC5B;UACE,sCAAsC,EAAEV,KAAK,CAACI;QAChD,CAAC,CACF;QAAA,SACOkB,SAAS,CAACC;MAAK,UAG5B;IAAA,EAAC;IAEF,OAAO,CAAC,CAAC;EACX;AACF,CAAC,CAAC","names":["clamp","convertToUnit","defineComponent","getEventCoordinates","useRender","computed","onMounted","ref","watch","VColorPickerCanvas","name","props","color","type","Object","disabled","Boolean","dotSize","Number","String","default","height","width","emits","hue","setup","emit","_ref","isInteracting","isOutsideUpdate","dotPosition","x","y","dotStyles","value","radius","parseInt","transform","canvasRef","updateDotPosition","rect","left","top","handleClick","e","clientX","clientY","getBoundingClientRect","handleMouseDown","preventDefault","window","addEventListener","handleMouseMove","handleMouseUp","coords","removeEventListener","h","_props$color","s","v","a","_props$color2","updateCanvas","canvas","ctx","getContext","saturationGradient","createLinearGradient","addColorStop","_props$color3","fillStyle","fillRect","valueGradient","_props$color4","immediate","deep"],"sources":["../../../src/components/VColorPicker/VColorPickerCanvas.tsx"],"sourcesContent":["// Styles\nimport './VColorPickerCanvas.sass'\n\n// Utilities\nimport { clamp, convertToUnit, defineComponent, getEventCoordinates, useRender } from '@/util'\nimport { computed, onMounted, ref, watch } from 'vue'\n\n// Types\nimport type { HSV } from '@/util'\nimport type { PropType } from 'vue'\n\nexport const VColorPickerCanvas = defineComponent({\n  name: 'VColorPickerCanvas',\n\n  props: {\n    color: {\n      type: Object as PropType<HSV | null>,\n    },\n    disabled: Boolean,\n    dotSize: {\n      type: [Number, String],\n      default: 10,\n    },\n    height: {\n      type: [Number, String],\n      default: 150,\n    },\n    width: {\n      type: [Number, String],\n      default: 300,\n    },\n  },\n\n  emits: {\n    'update:color': (color: HSV) => true,\n    'update:position': (hue: any) => true,\n  },\n\n  setup (props, { emit }) {\n    const isInteracting = ref(false)\n    const isOutsideUpdate = ref(false)\n    const dotPosition = ref({ x: 0, y: 0 })\n\n    const dotStyles = computed(() => {\n      const { x, y } = dotPosition.value\n      const radius = parseInt(props.dotSize, 10) / 2\n\n      return {\n        width: convertToUnit(props.dotSize),\n        height: convertToUnit(props.dotSize),\n        transform: `translate(${convertToUnit(x - radius)}, ${convertToUnit(y - radius)})`,\n      }\n    })\n\n    const canvasRef = ref<HTMLCanvasElement | null>()\n\n    function updateDotPosition (x: number, y: number, rect: DOMRect) {\n      const { left, top, width, height } = rect\n      dotPosition.value = {\n        x: clamp(x - left, 0, width),\n        y: clamp(y - top, 0, height),\n      }\n    }\n\n    function handleClick (e: MouseEvent) {\n      if (props.disabled || !canvasRef.value) return\n\n      updateDotPosition(e.clientX, e.clientY, canvasRef.value.getBoundingClientRect())\n    }\n\n    function handleMouseDown (e: MouseEvent | TouchEvent) {\n      // To prevent selection while moving cursor\n      e.preventDefault()\n\n      if (props.disabled) return\n\n      isInteracting.value = true\n\n      window.addEventListener('mousemove', handleMouseMove)\n      window.addEventListener('mouseup', handleMouseUp)\n      window.addEventListener('touchmove', handleMouseMove)\n      window.addEventListener('touchend', handleMouseUp)\n    }\n\n    function handleMouseMove (e: MouseEvent | TouchEvent) {\n      if (props.disabled || !canvasRef.value) return\n\n      isInteracting.value = true\n\n      const coords = getEventCoordinates(e)\n\n      updateDotPosition(coords.clientX, coords.clientY, canvasRef.value.getBoundingClientRect())\n    }\n\n    function handleMouseUp () {\n      window.removeEventListener('mousemove', handleMouseMove)\n      window.removeEventListener('mouseup', handleMouseUp)\n      window.removeEventListener('touchmove', handleMouseMove)\n      window.removeEventListener('touchend', handleMouseUp)\n    }\n\n    watch(dotPosition, () => {\n      if (isOutsideUpdate.value) {\n        isOutsideUpdate.value = false\n        return\n      }\n\n      if (!canvasRef.value) return\n\n      const { width, height } = canvasRef.value.getBoundingClientRect()\n      const { x, y } = dotPosition.value\n\n      emit('update:color', {\n        h: props.color?.h ?? 0,\n        s: clamp(x, 0, width) / width,\n        v: 1 - clamp(y, 0, height) / height,\n        a: props.color?.a ?? 1,\n      })\n    })\n\n    function updateCanvas () {\n      if (!canvasRef.value) return\n\n      const canvas = canvasRef.value\n      const ctx = canvas.getContext('2d')\n\n      if (!ctx) return\n\n      const saturationGradient = ctx.createLinearGradient(0, 0, canvas.width, 0)\n      saturationGradient.addColorStop(0, 'hsla(0, 0%, 100%, 1)') // white\n      saturationGradient.addColorStop(1, `hsla(${props.color?.h ?? 0}, 100%, 50%, 1)`)\n      ctx.fillStyle = saturationGradient\n      ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n      const valueGradient = ctx.createLinearGradient(0, 0, 0, canvas.height)\n      valueGradient.addColorStop(0, 'hsla(0, 0%, 100%, 0)') // transparent\n      valueGradient.addColorStop(1, 'hsla(0, 0%, 0%, 1)') // black\n      ctx.fillStyle = valueGradient\n      ctx.fillRect(0, 0, canvas.width, canvas.height)\n    }\n\n    watch(() => props.color?.h, updateCanvas, { immediate: true })\n\n    watch(() => props.color, () => {\n      if (isInteracting.value) {\n        isInteracting.value = false\n        return\n      }\n\n      if (!props.color) return\n\n      isOutsideUpdate.value = true\n\n      dotPosition.value = {\n        x: props.color.s * parseInt(props.width, 10),\n        y: (1 - props.color.v) * parseInt(props.height, 10),\n      }\n    }, { deep: true, immediate: true })\n\n    onMounted(() => updateCanvas())\n\n    useRender(() => (\n      <div\n        class=\"v-color-picker-canvas\"\n        style={{\n          width: convertToUnit(props.width),\n          height: convertToUnit(props.height),\n        }}\n        onClick={ handleClick }\n        onMousedown={ handleMouseDown }\n        onTouchstart={ handleMouseDown }\n      >\n        <canvas\n          ref={ canvasRef }\n          width={ props.width }\n          height={ props.height }\n        />\n        <div\n          class={[\n            'v-color-picker-canvas__dot',\n            {\n              'v-color-picker-canvas__dot--disabled': props.disabled,\n            },\n          ]}\n          style={ dotStyles.value }\n        />\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VColorPickerCanvas = InstanceType<typeof VColorPickerCanvas>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _typeof from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _regeneratorRuntime from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.global-this.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.weak-map.js\";\nvar TYPE_REQUEST = \"q\";\nvar TYPE_RESPONSE = \"s\";\nvar DEFAULT_TIMEOUT = 6e4;\nfunction defaultSerialize(i) {\n  return i;\n}\nvar defaultDeserialize = defaultSerialize;\nvar clearTimeout = globalThis.clearTimeout,\n  setTimeout = globalThis.setTimeout;\nvar random = Math.random.bind(Math);\nfunction createBirpc($functions, options) {\n  var post = options.post,\n    on = options.on,\n    _options$off = options.off,\n    off = _options$off === void 0 ? function () {} : _options$off,\n    _options$eventNames = options.eventNames,\n    eventNames = _options$eventNames === void 0 ? [] : _options$eventNames,\n    _options$serialize = options.serialize,\n    serialize = _options$serialize === void 0 ? defaultSerialize : _options$serialize,\n    _options$deserialize = options.deserialize,\n    deserialize = _options$deserialize === void 0 ? defaultDeserialize : _options$deserialize,\n    resolver = options.resolver,\n    _options$bind = options.bind,\n    bind = _options$bind === void 0 ? \"rpc\" : _options$bind,\n    _options$timeout = options.timeout,\n    timeout = _options$timeout === void 0 ? DEFAULT_TIMEOUT : _options$timeout;\n  var $closed = false;\n  var _rpcPromiseMap = /* @__PURE__ */new Map();\n  var _promiseInit;\n  function _call(_x, _x2, _x3, _x4) {\n    return _call2.apply(this, arguments);\n  }\n  function _call2() {\n    _call2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(method, args, event, optional) {\n      var req, send, _createPromiseWithRes, promise, resolve, reject, id, timeoutId, handler, _handler, _options$onGeneralErr;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _handler = function _handler3() {\n                _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n                  var newReq,\n                    _timeoutId$unref,\n                    _timeoutId,\n                    _args2 = arguments;\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          newReq = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : req;\n                          if (timeout >= 0) {\n                            timeoutId = setTimeout(function () {\n                              try {\n                                var _options$onTimeoutErr;\n                                var handleResult = (_options$onTimeoutErr = options.onTimeoutError) === null || _options$onTimeoutErr === void 0 ? void 0 : _options$onTimeoutErr.call(options, method, args);\n                                if (handleResult !== true) throw new Error(\"[birpc] timeout on calling \\\"\".concat(method, \"\\\"\"));\n                              } catch (e) {\n                                reject(e);\n                              }\n                              _rpcPromiseMap[\"delete\"](id);\n                            }, timeout);\n                            if (_typeof(timeoutId) === \"object\") timeoutId = (_timeoutId$unref = (_timeoutId = timeoutId).unref) === null || _timeoutId$unref === void 0 ? void 0 : _timeoutId$unref.call(_timeoutId);\n                          }\n                          _rpcPromiseMap.set(id, {\n                            resolve: resolve,\n                            reject: reject,\n                            timeoutId: timeoutId,\n                            method: method\n                          });\n                          _context2.next = 5;\n                          return send(newReq);\n                        case 5:\n                          return _context2.abrupt(\"return\", promise);\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n                return _handler.apply(this, arguments);\n              };\n              handler = function _handler2() {\n                return _handler.apply(this, arguments);\n              };\n              if (!$closed) {\n                _context3.next = 4;\n                break;\n              }\n              throw new Error(\"[birpc] rpc is closed, cannot call \\\"\".concat(method, \"\\\"\"));\n            case 4:\n              req = {\n                m: method,\n                a: args,\n                t: TYPE_REQUEST\n              };\n              if (optional) req.o = true;\n              send = /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_req) {\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          return _context.abrupt(\"return\", post(serialize(_req)));\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n                return function send(_x6) {\n                  return _ref3.apply(this, arguments);\n                };\n              }();\n              if (!event) {\n                _context3.next = 11;\n                break;\n              }\n              _context3.next = 10;\n              return send(req);\n            case 10:\n              return _context3.abrupt(\"return\");\n            case 11:\n              if (!_promiseInit) {\n                _context3.next = 18;\n                break;\n              }\n              _context3.prev = 12;\n              _context3.next = 15;\n              return _promiseInit;\n            case 15:\n              _context3.prev = 15;\n              _promiseInit = void 0;\n              return _context3.finish(15);\n            case 18:\n              _createPromiseWithRes = createPromiseWithResolvers(), promise = _createPromiseWithRes.promise, resolve = _createPromiseWithRes.resolve, reject = _createPromiseWithRes.reject;\n              id = nanoid();\n              req.i = id;\n              _context3.prev = 21;\n              if (!options.onRequest) {\n                _context3.next = 27;\n                break;\n              }\n              _context3.next = 25;\n              return options.onRequest(req, handler, resolve);\n            case 25:\n              _context3.next = 29;\n              break;\n            case 27:\n              _context3.next = 29;\n              return handler();\n            case 29:\n              _context3.next = 36;\n              break;\n            case 31:\n              _context3.prev = 31;\n              _context3.t0 = _context3[\"catch\"](21);\n              if (!(((_options$onGeneralErr = options.onGeneralError) === null || _options$onGeneralErr === void 0 ? void 0 : _options$onGeneralErr.call(options, _context3.t0)) !== true)) {\n                _context3.next = 35;\n                break;\n              }\n              throw _context3.t0;\n            case 35:\n              return _context3.abrupt(\"return\");\n            case 36:\n              _context3.prev = 36;\n              clearTimeout(timeoutId);\n              _rpcPromiseMap[\"delete\"](id);\n              return _context3.finish(36);\n            case 40:\n              return _context3.abrupt(\"return\", promise);\n            case 41:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[12,, 15, 18], [21, 31, 36, 40]]);\n    }));\n    return _call2.apply(this, arguments);\n  }\n  var $call = function $call(method) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return _call(method, args, false);\n  };\n  var $callOptional = function $callOptional(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return _call(method, args, false, true);\n  };\n  var $callEvent = function $callEvent(method) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return _call(method, args, true);\n  };\n  var $callRaw = function $callRaw(options2) {\n    return _call(options2.method, options2.args, options2.event, options2.optional);\n  };\n  var builtinMethods = {\n    $call: $call,\n    $callOptional: $callOptional,\n    $callEvent: $callEvent,\n    $callRaw: $callRaw,\n    $rejectPendingCalls: $rejectPendingCalls,\n    get $closed() {\n      return $closed;\n    },\n    $close: $close,\n    $functions: $functions\n  };\n  var rpc = new Proxy({}, {\n    get: function get(_, method) {\n      if (Object.prototype.hasOwnProperty.call(builtinMethods, method)) return builtinMethods[method];\n      if (method === \"then\" && !eventNames.includes(\"then\") && !(\"then\" in $functions)) return void 0;\n      var sendEvent = function sendEvent() {\n        for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n        return _call(method, args, true);\n      };\n      if (eventNames.includes(method)) {\n        sendEvent.asEvent = sendEvent;\n        return sendEvent;\n      }\n      var sendCall = function sendCall() {\n        for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          args[_key5] = arguments[_key5];\n        }\n        return _call(method, args, false);\n      };\n      sendCall.asEvent = sendEvent;\n      return sendCall;\n    }\n  });\n  function $close(customError) {\n    $closed = true;\n    _rpcPromiseMap.forEach(function (_ref) {\n      var reject = _ref.reject,\n        method = _ref.method;\n      var error = new Error(\"[birpc] rpc is closed, cannot call \\\"\".concat(method, \"\\\"\"));\n      if (customError) {\n        var _customError$cause;\n        (_customError$cause = customError.cause) !== null && _customError$cause !== void 0 ? _customError$cause : customError.cause = error;\n        return reject(customError);\n      }\n      reject(error);\n    });\n    _rpcPromiseMap.clear();\n    off(onMessage);\n  }\n  function $rejectPendingCalls(handler) {\n    var entries = Array.from(_rpcPromiseMap.values());\n    var handlerResults = entries.map(function (_ref2) {\n      var method = _ref2.method,\n        reject = _ref2.reject;\n      if (!handler) {\n        return reject(new Error(\"[birpc]: rejected pending call \\\"\".concat(method, \"\\\".\")));\n      }\n      return handler({\n        method: method,\n        reject: reject\n      });\n    });\n    _rpcPromiseMap.clear();\n    return handlerResults;\n  }\n  function onMessage(_x5) {\n    return _onMessage.apply(this, arguments);\n  }\n  function _onMessage() {\n    _onMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data) {\n      var msg,\n        _options$onGeneralErr2,\n        _msg,\n        method,\n        args,\n        optional,\n        result,\n        error,\n        fn,\n        _len6,\n        extra,\n        _key6,\n        _options$onGeneralErr3,\n        _options$onGeneralErr4,\n        _msg2,\n        ack,\n        _result,\n        _error,\n        _promise,\n        _args4 = arguments;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              msg = deserialize(data);\n              _context4.next = 9;\n              break;\n            case 4:\n              _context4.prev = 4;\n              _context4.t0 = _context4[\"catch\"](0);\n              if (!(((_options$onGeneralErr2 = options.onGeneralError) === null || _options$onGeneralErr2 === void 0 ? void 0 : _options$onGeneralErr2.call(options, _context4.t0)) !== true)) {\n                _context4.next = 8;\n                break;\n              }\n              throw _context4.t0;\n            case 8:\n              return _context4.abrupt(\"return\");\n            case 9:\n              if (!(msg.t === TYPE_REQUEST)) {\n                _context4.next = 57;\n                break;\n              }\n              _msg = msg, method = _msg.m, args = _msg.a, optional = _msg.o;\n              _context4.next = 13;\n              return resolver ? resolver(method, $functions[method]) : $functions[method];\n            case 13:\n              fn = _context4.sent;\n              if (optional) fn || (fn = function fn() {\n                return void 0;\n              });\n              if (fn) {\n                _context4.next = 19;\n                break;\n              }\n              error = new Error(\"[birpc] function \\\"\".concat(method, \"\\\" not found\"));\n              _context4.next = 28;\n              break;\n            case 19:\n              _context4.prev = 19;\n              _context4.next = 22;\n              return fn.apply(bind === \"rpc\" ? rpc : $functions, args);\n            case 22:\n              result = _context4.sent;\n              _context4.next = 28;\n              break;\n            case 25:\n              _context4.prev = 25;\n              _context4.t1 = _context4[\"catch\"](19);\n              error = _context4.t1;\n            case 28:\n              if (!msg.i) {\n                _context4.next = 55;\n                break;\n              }\n              if (error && options.onError) options.onError(error, method, args);\n              if (!(error && options.onFunctionError)) {\n                _context4.next = 33;\n                break;\n              }\n              if (!(options.onFunctionError(error, method, args) === true)) {\n                _context4.next = 33;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 33:\n              for (_len6 = _args4.length, extra = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n                extra[_key6 - 1] = _args4[_key6];\n              }\n              if (error) {\n                _context4.next = 46;\n                break;\n              }\n              _context4.prev = 35;\n              _context4.next = 38;\n              return post.apply(void 0, [serialize({\n                t: TYPE_RESPONSE,\n                i: msg.i,\n                r: result\n              })].concat(extra));\n            case 38:\n              return _context4.abrupt(\"return\");\n            case 41:\n              _context4.prev = 41;\n              _context4.t2 = _context4[\"catch\"](35);\n              error = _context4.t2;\n              if (!(((_options$onGeneralErr3 = options.onGeneralError) === null || _options$onGeneralErr3 === void 0 ? void 0 : _options$onGeneralErr3.call(options, _context4.t2, method, args)) !== true)) {\n                _context4.next = 46;\n                break;\n              }\n              throw _context4.t2;\n            case 46:\n              _context4.prev = 46;\n              _context4.next = 49;\n              return post.apply(void 0, [serialize({\n                t: TYPE_RESPONSE,\n                i: msg.i,\n                e: error\n              })].concat(extra));\n            case 49:\n              _context4.next = 55;\n              break;\n            case 51:\n              _context4.prev = 51;\n              _context4.t3 = _context4[\"catch\"](46);\n              if (!(((_options$onGeneralErr4 = options.onGeneralError) === null || _options$onGeneralErr4 === void 0 ? void 0 : _options$onGeneralErr4.call(options, _context4.t3, method, args)) !== true)) {\n                _context4.next = 55;\n                break;\n              }\n              throw _context4.t3;\n            case 55:\n              _context4.next = 61;\n              break;\n            case 57:\n              _msg2 = msg, ack = _msg2.i, _result = _msg2.r, _error = _msg2.e;\n              _promise = _rpcPromiseMap.get(ack);\n              if (_promise) {\n                clearTimeout(_promise.timeoutId);\n                if (_error) _promise.reject(_error);else _promise.resolve(_result);\n              }\n              _rpcPromiseMap[\"delete\"](ack);\n            case 61:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 4], [19, 25], [35, 41], [46, 51]]);\n    }));\n    return _onMessage.apply(this, arguments);\n  }\n  _promiseInit = on(onMessage);\n  return rpc;\n}\nvar cacheMap = /* @__PURE__ */new WeakMap();\nfunction cachedMap(items, fn) {\n  return items.map(function (i) {\n    var r = cacheMap.get(i);\n    if (!r) {\n      r = fn(i);\n      cacheMap.set(i, r);\n    }\n    return r;\n  });\n}\nfunction createBirpcGroup(functions, channels) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var getChannels = function getChannels() {\n    return typeof channels === \"function\" ? channels() : channels;\n  };\n  var getClients = function getClients() {\n    var channels2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getChannels();\n    return cachedMap(channels2, function (s) {\n      return createBirpc(functions, _objectSpread(_objectSpread({}, options), s));\n    });\n  };\n  function _boardcast(method, args, event, optional) {\n    var clients = getClients();\n    return Promise.all(clients.map(function (c) {\n      return c.$callRaw({\n        method: method,\n        args: args,\n        event: event,\n        optional: optional\n      });\n    }));\n  }\n  function $call(method) {\n    for (var _len7 = arguments.length, args = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n      args[_key7 - 1] = arguments[_key7];\n    }\n    return _boardcast(method, args, false);\n  }\n  function $callOptional(method) {\n    for (var _len8 = arguments.length, args = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n      args[_key8 - 1] = arguments[_key8];\n    }\n    return _boardcast(method, args, false, true);\n  }\n  function $callEvent(method) {\n    for (var _len9 = arguments.length, args = new Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n      args[_key9 - 1] = arguments[_key9];\n    }\n    return _boardcast(method, args, true);\n  }\n  var broadcastBuiltin = {\n    $call: $call,\n    $callOptional: $callOptional,\n    $callEvent: $callEvent\n  };\n  var broadcastProxy = new Proxy({}, {\n    get: function get(_, method) {\n      if (Object.prototype.hasOwnProperty.call(broadcastBuiltin, method)) return broadcastBuiltin[method];\n      var client = getClients();\n      var callbacks = client.map(function (c) {\n        return c[method];\n      });\n      var sendCall = function sendCall() {\n        for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n          args[_key10] = arguments[_key10];\n        }\n        return Promise.all(callbacks.map(function (i) {\n          return i.apply(void 0, args);\n        }));\n      };\n      sendCall.asEvent = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var _len11,\n          args,\n          _key11,\n          _args5 = arguments;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                for (_len11 = _args5.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n                  args[_key11] = _args5[_key11];\n                }\n                _context5.next = 3;\n                return Promise.all(callbacks.map(function (i) {\n                  return i.asEvent.apply(i, args);\n                }));\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      return sendCall;\n    }\n  });\n  function updateChannels(fn) {\n    var channels2 = getChannels();\n    fn === null || fn === void 0 ? void 0 : fn(channels2);\n    return getClients(channels2);\n  }\n  getClients();\n  return {\n    get clients() {\n      return getClients();\n    },\n    functions: functions,\n    updateChannels: updateChannels,\n    broadcast: broadcastProxy,\n    /**\n     * @deprecated use `broadcast`\n     */\n    // @ts-expect-error deprecated\n    boardcast: broadcastProxy\n  };\n}\nfunction createPromiseWithResolvers() {\n  var resolve;\n  var reject;\n  var promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n  return {\n    promise: promise,\n    resolve: resolve,\n    reject: reject\n  };\n}\nvar urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nfunction nanoid() {\n  var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 21;\n  var id = \"\";\n  var i = size;\n  while (i--) {\n    id += urlAlphabet[random() * 64 | 0];\n  }\n  return id;\n}\nexport { DEFAULT_TIMEOUT, cachedMap, createBirpc, createBirpcGroup };","map":{"version":3,"names":["TYPE_REQUEST","TYPE_RESPONSE","DEFAULT_TIMEOUT","defaultSerialize","i","defaultDeserialize","clearTimeout","globalThis","setTimeout","random","Math","bind","createBirpc","$functions","options","post","on","off","eventNames","serialize","deserialize","resolver","timeout","$closed","_rpcPromiseMap","Map","_promiseInit","_call","method","args","event","optional","handler","newReq","req","timeoutId","handleResult","onTimeoutError","Error","e","reject","id","unref","set","resolve","send","promise","m","a","t","o","_req","createPromiseWithResolvers","nanoid","onRequest","onGeneralError","$call","$callOptional","$callEvent","$callRaw","options2","builtinMethods","$rejectPendingCalls","$close","rpc","Proxy","get","_","Object","prototype","hasOwnProperty","call","includes","sendEvent","asEvent","sendCall","customError","forEach","error","cause","clear","onMessage","entries","Array","from","values","handlerResults","map","data","msg","fn","apply","result","onError","onFunctionError","extra","r","ack","cacheMap","WeakMap","cachedMap","items","createBirpcGroup","functions","channels","getChannels","getClients","channels2","s","_boardcast","clients","Promise","all","c","broadcastBuiltin","broadcastProxy","client","callbacks","updateChannels","broadcast","boardcast","res","rej","urlAlphabet","size"],"sources":["/home/merna-zakaria/projects/self-learning-projects/vue_register_project/node_modules/birpc/dist/index.mjs"],"sourcesContent":["const TYPE_REQUEST = \"q\";\nconst TYPE_RESPONSE = \"s\";\nconst DEFAULT_TIMEOUT = 6e4;\nfunction defaultSerialize(i) {\n  return i;\n}\nconst defaultDeserialize = defaultSerialize;\nconst { clearTimeout, setTimeout } = globalThis;\nconst random = Math.random.bind(Math);\nfunction createBirpc($functions, options) {\n  const {\n    post,\n    on,\n    off = () => {\n    },\n    eventNames = [],\n    serialize = defaultSerialize,\n    deserialize = defaultDeserialize,\n    resolver,\n    bind = \"rpc\",\n    timeout = DEFAULT_TIMEOUT\n  } = options;\n  let $closed = false;\n  const _rpcPromiseMap = /* @__PURE__ */ new Map();\n  let _promiseInit;\n  async function _call(method, args, event, optional) {\n    if ($closed)\n      throw new Error(`[birpc] rpc is closed, cannot call \"${method}\"`);\n    const req = { m: method, a: args, t: TYPE_REQUEST };\n    if (optional)\n      req.o = true;\n    const send = async (_req) => post(serialize(_req));\n    if (event) {\n      await send(req);\n      return;\n    }\n    if (_promiseInit) {\n      try {\n        await _promiseInit;\n      } finally {\n        _promiseInit = void 0;\n      }\n    }\n    let { promise, resolve, reject } = createPromiseWithResolvers();\n    const id = nanoid();\n    req.i = id;\n    let timeoutId;\n    async function handler(newReq = req) {\n      if (timeout >= 0) {\n        timeoutId = setTimeout(() => {\n          try {\n            const handleResult = options.onTimeoutError?.(method, args);\n            if (handleResult !== true)\n              throw new Error(`[birpc] timeout on calling \"${method}\"`);\n          } catch (e) {\n            reject(e);\n          }\n          _rpcPromiseMap.delete(id);\n        }, timeout);\n        if (typeof timeoutId === \"object\")\n          timeoutId = timeoutId.unref?.();\n      }\n      _rpcPromiseMap.set(id, { resolve, reject, timeoutId, method });\n      await send(newReq);\n      return promise;\n    }\n    try {\n      if (options.onRequest)\n        await options.onRequest(req, handler, resolve);\n      else\n        await handler();\n    } catch (e) {\n      if (options.onGeneralError?.(e) !== true)\n        throw e;\n      return;\n    } finally {\n      clearTimeout(timeoutId);\n      _rpcPromiseMap.delete(id);\n    }\n    return promise;\n  }\n  const $call = (method, ...args) => _call(method, args, false);\n  const $callOptional = (method, ...args) => _call(method, args, false, true);\n  const $callEvent = (method, ...args) => _call(method, args, true);\n  const $callRaw = (options2) => _call(options2.method, options2.args, options2.event, options2.optional);\n  const builtinMethods = {\n    $call,\n    $callOptional,\n    $callEvent,\n    $callRaw,\n    $rejectPendingCalls,\n    get $closed() {\n      return $closed;\n    },\n    $close,\n    $functions\n  };\n  const rpc = new Proxy({}, {\n    get(_, method) {\n      if (Object.prototype.hasOwnProperty.call(builtinMethods, method))\n        return builtinMethods[method];\n      if (method === \"then\" && !eventNames.includes(\"then\") && !(\"then\" in $functions))\n        return void 0;\n      const sendEvent = (...args) => _call(method, args, true);\n      if (eventNames.includes(method)) {\n        sendEvent.asEvent = sendEvent;\n        return sendEvent;\n      }\n      const sendCall = (...args) => _call(method, args, false);\n      sendCall.asEvent = sendEvent;\n      return sendCall;\n    }\n  });\n  function $close(customError) {\n    $closed = true;\n    _rpcPromiseMap.forEach(({ reject, method }) => {\n      const error = new Error(`[birpc] rpc is closed, cannot call \"${method}\"`);\n      if (customError) {\n        customError.cause ??= error;\n        return reject(customError);\n      }\n      reject(error);\n    });\n    _rpcPromiseMap.clear();\n    off(onMessage);\n  }\n  function $rejectPendingCalls(handler) {\n    const entries = Array.from(_rpcPromiseMap.values());\n    const handlerResults = entries.map(({ method, reject }) => {\n      if (!handler) {\n        return reject(new Error(`[birpc]: rejected pending call \"${method}\".`));\n      }\n      return handler({ method, reject });\n    });\n    _rpcPromiseMap.clear();\n    return handlerResults;\n  }\n  async function onMessage(data, ...extra) {\n    let msg;\n    try {\n      msg = deserialize(data);\n    } catch (e) {\n      if (options.onGeneralError?.(e) !== true)\n        throw e;\n      return;\n    }\n    if (msg.t === TYPE_REQUEST) {\n      const { m: method, a: args, o: optional } = msg;\n      let result, error;\n      let fn = await (resolver ? resolver(method, $functions[method]) : $functions[method]);\n      if (optional)\n        fn ||= () => void 0;\n      if (!fn) {\n        error = new Error(`[birpc] function \"${method}\" not found`);\n      } else {\n        try {\n          result = await fn.apply(bind === \"rpc\" ? rpc : $functions, args);\n        } catch (e) {\n          error = e;\n        }\n      }\n      if (msg.i) {\n        if (error && options.onError)\n          options.onError(error, method, args);\n        if (error && options.onFunctionError) {\n          if (options.onFunctionError(error, method, args) === true)\n            return;\n        }\n        if (!error) {\n          try {\n            await post(serialize({ t: TYPE_RESPONSE, i: msg.i, r: result }), ...extra);\n            return;\n          } catch (e) {\n            error = e;\n            if (options.onGeneralError?.(e, method, args) !== true)\n              throw e;\n          }\n        }\n        try {\n          await post(serialize({ t: TYPE_RESPONSE, i: msg.i, e: error }), ...extra);\n        } catch (e) {\n          if (options.onGeneralError?.(e, method, args) !== true)\n            throw e;\n        }\n      }\n    } else {\n      const { i: ack, r: result, e: error } = msg;\n      const promise = _rpcPromiseMap.get(ack);\n      if (promise) {\n        clearTimeout(promise.timeoutId);\n        if (error)\n          promise.reject(error);\n        else\n          promise.resolve(result);\n      }\n      _rpcPromiseMap.delete(ack);\n    }\n  }\n  _promiseInit = on(onMessage);\n  return rpc;\n}\nconst cacheMap = /* @__PURE__ */ new WeakMap();\nfunction cachedMap(items, fn) {\n  return items.map((i) => {\n    let r = cacheMap.get(i);\n    if (!r) {\n      r = fn(i);\n      cacheMap.set(i, r);\n    }\n    return r;\n  });\n}\nfunction createBirpcGroup(functions, channels, options = {}) {\n  const getChannels = () => typeof channels === \"function\" ? channels() : channels;\n  const getClients = (channels2 = getChannels()) => cachedMap(channels2, (s) => createBirpc(functions, { ...options, ...s }));\n  function _boardcast(method, args, event, optional) {\n    const clients = getClients();\n    return Promise.all(clients.map((c) => c.$callRaw({ method, args, event, optional })));\n  }\n  function $call(method, ...args) {\n    return _boardcast(method, args, false);\n  }\n  function $callOptional(method, ...args) {\n    return _boardcast(method, args, false, true);\n  }\n  function $callEvent(method, ...args) {\n    return _boardcast(method, args, true);\n  }\n  const broadcastBuiltin = {\n    $call,\n    $callOptional,\n    $callEvent\n  };\n  const broadcastProxy = new Proxy({}, {\n    get(_, method) {\n      if (Object.prototype.hasOwnProperty.call(broadcastBuiltin, method))\n        return broadcastBuiltin[method];\n      const client = getClients();\n      const callbacks = client.map((c) => c[method]);\n      const sendCall = (...args) => {\n        return Promise.all(callbacks.map((i) => i(...args)));\n      };\n      sendCall.asEvent = async (...args) => {\n        await Promise.all(callbacks.map((i) => i.asEvent(...args)));\n      };\n      return sendCall;\n    }\n  });\n  function updateChannels(fn) {\n    const channels2 = getChannels();\n    fn?.(channels2);\n    return getClients(channels2);\n  }\n  getClients();\n  return {\n    get clients() {\n      return getClients();\n    },\n    functions,\n    updateChannels,\n    broadcast: broadcastProxy,\n    /**\n     * @deprecated use `broadcast`\n     */\n    // @ts-expect-error deprecated\n    boardcast: broadcastProxy\n  };\n}\nfunction createPromiseWithResolvers() {\n  let resolve;\n  let reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve, reject };\n}\nconst urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nfunction nanoid(size = 21) {\n  let id = \"\";\n  let i = size;\n  while (i--)\n    id += urlAlphabet[random() * 64 | 0];\n  return id;\n}\n\nexport { DEFAULT_TIMEOUT, cachedMap, createBirpc, createBirpcGroup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}